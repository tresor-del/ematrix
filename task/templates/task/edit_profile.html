
<div class="modal fade" id="taskModal" tabindex="-1" aria-labelledby="taskModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content mode custom-bg">
        <div class="modal-header bg-primary">
        <h5 class="modal-title" id="taskModalLabel">
            Edit Profile
        </h5>
        <button style="color: white;" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body" >

        <div class="container p" id="edit-profile">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <!-- Profil Card -->
                    <div class=" ">
                        <div class="card-body">
                                <div class="text-center">
                                    <!-- Image Form -->
                                    <form class="hide-img" method="POST" action="{% url 'task:edit_profile' %}" enctype="multipart/form-data" >
                                        {% csrf_token %}
                                        <div class="m-3">
                                            {% if user.profile_image %}
                                            <img id="preview-image" src="{{ user.profile_image.url }}" alt="Profile Image" class="rounded-circle" width="150" height="150">
                                            {% else %}
                                            <img id="preview-image" src="../../../media/images/profile.jpg" alt="Profile Image" class="rounded-circle" width="150" height="150">
                                            {% endif %}
                                        </div>
                                        <div class="form-group mt-2">
                                            <label for="profile_image" class="custom-file-btn">Profile Image</label>
                                            <input type="file" class="form-control-file" id="profile_image" name="profile_image" accept="image/*">

                                        </div>

                                        <!-- Username Form -->
                                        <div class="form-group mt-2">
                                            <label for="username">Username</label>
                                            <input type="text" class="form-control" id="username" name="username" value="{{ user }}">
                                        </div>

                                            <!-- Email form -->
                                        <div class="form-group mt-2">
                                            <label for="email">Email</label>
                                            <input type="email" class="form-control" id="email" name="email" value="{{ user.email }}">
                                        </div>

                                        <!-- submit button -->
                                        <div class="mt-3">
                                            <button type="submit" class="btn btn-outline-primary">Save</button>
                                        </div>
                                    </form>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

        <!-- JavaScript for displaying Profile Image dynamically -->
        <script>
            const fileInput = document.getElementById('profile_image');
            const fileName = document.getElementById('fileName');
          
            fileInput.addEventListener('change', function() {
              if (fileInput.files.length > 0) {
                fileName.textContent = fileInput.files[0].name;
              } else {
                fileName.textContent = 'Aucun fichier sélectionné';
              }
            });
        </script>